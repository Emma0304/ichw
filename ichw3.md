# 详述通用的高速缓存存储器结构及工作原理
## 高速缓存存储器的历史由来
- 在计算机技术发展的初级阶段，中央处理器的价格相对较高，但是中央处理器的处理速度比存储器要快的多，使中央处理器的高速处理能力不能充分发挥，整个计算机系统的工作效率受到影响。
- 人们想了很多方法来处理这种速度之间的不匹配，如采用多个通用寄存器、多存储体交叉存取等，在存储层次上采用高速缓冲存储器也是常用的方法之一。
- 根据程序局部性原理，正在使用的主存储器某一单元邻近的那些单元将被用到的可能性很大。因而，当中央处理器存取主存储器某一单元时，计算机硬件就自动地将包括该单元在内的**那一组单元**内容调入高速缓冲存储器，中央处理器即将存取的主存储器单元很可能就在刚刚调入到高速缓冲存储器的那一组单元内。于是，中央处理器就可以直接对高速缓冲存储器进行存取。这样效率就有了很大的提高。:relaxed:

## 组成结构
通过查询资料可以得出：
- 高速缓冲存储器是存在于主存与CPU之间的一级存储器， 由静态存储芯片(SRAM)组成，容量比较小但速度比主存高得多，**接近于CPU的速度**。高速缓冲存储器通常由高速存储器、联想存储器、替换逻辑电路和相应的控制线路组成。
- 主要由三大部分组成：
  - Cache存储体：存放由主存调入的指令与数据块。
  - 地址转换部件：建立目录表以实现主存地址到缓存地址的转换。
  - 替换部件：在缓存已满时按一定策略进行数据块替换，并修改地址转换部件。
  
## 工作原理
- 前面提到过，由于中央处理器的效率过高，中央处理器很多时候要等存储器来完成工作，这就导致了效率的低下。
- 勤劳智慧的人类首先想到了建立以一个**内存**。内存容量相比外存小很多，但是CPU从内存中读入数据的速度要比CPU从外存中读入数据快很多很多。可以在内存中直接包含着一些数据，CPU只需从内存中调用数据即可，从而提高了计算机的速度和效率。
- 之后人们又想到了**缓存**，容量更小，读入数据能力更快，成本也越高。它的工作原理和内存是一致的。
  - 计算机从缓存中提取数据的时候，会有命中和不命中两种情况。一般来说，现代计算机的命中率是80%,而许多计算机性能的好坏就是通过缓存的命中率来决定的。
  - 下面是一些具体的解释。
    - 提高大样本下的命中率，以此来提高计算机处理数据的速度。在有高速缓冲存储器的计算机系统中，中央处理器存取主存储器的地址划分为行号、列号和组内地址三个字段。于是，主存储器就在逻辑上划分为若干行；每行划分为若干的存储单元组；每组包含几个或几十个字。高速存储器也相应地划分为行和列的存储单元组。二者的列数相同，组的大小也相同，但高速存储器的行数却比主存储器的行数少得多。
    - 联想存储器是用于地址联想，有与高速存储器相同行数和列数的存储单元。当主存储器某一列某一行存储单元组调入高速存储器同一列某一空着的存储单元组时，与联想存储器对应位置的存储单元就记录调入的存储单元组在主存储器中的行号。
    - 当中央处理器存取主存储器时，硬件首先自动对存取地址的列号字段进行译码，以便将联想存储器该列的全部行号与存取主存储器地址的行号字段进行比较：若有相同的，表明要存取的主存储器单元已在高速存储器中，称为命中，硬件就将存取主存储器的地址映射为高速存储器的地址并执行存取操作；若都不相同，表明该单元不在高速存储器中，称为脱靶，硬件将执行存取主存储器操作并自动将该单元所在的那一主存储器单元组调入高速存储器相同列中空着的存储单元组中，同时将该组在主存储器中的行号存入联想存储器对应位置的单元内。
    - 当出现脱靶而高速存储器对应列中没有空的位置时，便淘汰该列中的某一组以腾出位置存放新调入的组，这称为替换。当执行写主存储器操作时，为保持主存储器和高速存储器内容的一致性，对命中和脱靶须分别处理。

## 用Cache的优势
**解决了存储器大容量要求和低成本之间的矛盾。**在速度方面，计算机的主存和CPU直保持了大约一个数量级的差距。显然这个差距限制了CPU速度潜力的发挥。为了弥合这个差距，仅采用一种工艺的单一存储器是行不通的，必须进一步从计算机系统结构和组织上去研究。设置高速缓冲存储器是解决存取速度的重要方法。在CPU和主存中间设置高速缓冲存储器，构成高速缓存-主存层次，要求Cache在速度上能跟得上CPU的要求。

###### 参考链接：
###### 百度百科：[Cache](https://baike.baidu.com/item/高速缓冲存储器/9027270?fr=aladdin)
###### [cache结构与工作原理](https://blog.csdn.net/baidu_35679960/article/details/78610804)
